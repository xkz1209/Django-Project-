{% extends 'flights/base.html' %}
{% block title %}Home{% endblock %}
{% block content %}

    <!-- Heading for the Flights section -->
    <h2>Flights</h2>

    <!-- Form to search flights with filters -->
    <form method="get" class="row g-3 mb-4" action="{% url 'search_flights' %}">
        <div class="col-auto">
            <label for="destination" class="form-label">Destination:</label>
            <input type="text" id="destination" name="destination" class="form-control">
        </div>
        <div class="col-auto">
            <label for="flight_num" class="form-label">Flight Number:</label>
            <input type="text" id="flight_num" name="flight_num" class="form-control">
        </div>
        <div class="col-auto">
            <label for="min_price">Min Price:</label>
            <input type="number" step="0.01" class="form-control ml-2" id="min_price" name="min_price" value="{{ min_price }}">
        </div>
        <div class="col-auto">
            <label for="max_price">Max Price:</label>
            <input type="number" step="0.01" class="form-control ml-2" id="max_price" name="max_price" value="{{ max_price }}">
        </div>
        <div class="col-auto">
            <label for="bsearch"></label><br>
            <button type="submit" id="bsearch" class="btn btn-primary">Search</button>
        </div>
    </form>

    <!-- Table displaying all available flights -->
    <table class="table table-striped table-dark">
        <thead>
            <tr>
                <th>Flight Number</th>
                <th>Destination</th>
                <th>Departure</th>
                <th>Price</th>
                <th>Departure Time</th>
                <th>Stops</th>
                <th>Type</th>
                <th>Remaining</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for flight in flights %}
            <tr>
                <td>{{ flight.flight_num }}</td>
                <td>{{ flight.destination }}</td>
                <td>{{ flight.departure }}</td>
                <td>{{ flight.price }}</td>
                <td>{{ flight.departure_time }}</td>
                <td>{{ flight.num_stops }}</td>
                <td>{{ flight.flight_type }}</td>
                <td>{{ flight.total_num }}</td>
                <td>
                    <!-- Button to add selected flight to cart -->
                    <a href="{% url 'add_to_cart' flight.id %}" class="btn btn-primary">Add to Cart</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

{%  endblock  %}